<script>let opened=null;let timeOut;const DROPDOWNSTATE={};const dropdowns=document.querySelectorAll("select");const mainArea=document.getElementById("main_area");const panelRows=document.querySelectorAll(".panel_row");const panelCells=document.querySelectorAll(".panel_cell");const panelImgs=document.querySelectorAll(".panel_cell img");const makeCheckerboard=()=>{panelRows.forEach((row,rowIndex)=>{const cells=row.querySelectorAll(".panel_cell");const visibleCells=[];cells.forEach(cell=>{if(cell.style.display!=="none"){visibleCells.push(cell);cell.style.background=""}});if(rowIndex%2===0){visibleCells.forEach((cell,cellIndex)=>{if(cellIndex%2===0)cell.style.background="black"})}else{visibleCells.forEach((cell,cellIndex)=>{if(cellIndex%2!==0)cell.style.background="black"})}})};const loadState=(elmtWithData,stateContainer)=>{elmtWithData.forEach(elmt=>{Object.keys(elmt.dataset).map(data=>stateContainer[data]="")})};const checkState=image=>{let show=!0;const selectorsArray=Object.keys(image.dataset);selectorsArray.forEach(key=>{if(!image.dataset[key].includes(DROPDOWNSTATE[key]))show=!1;image.parentElement.style.display=(!show)?"none":""})};const scrollPanelInfo=()=>{const shownInfo=document.querySelector(".panel_info.show");if(timeOut)clearTimeout(timeOut);timeOut=setTimeout(()=>{if(!shownInfo)return;shownInfo.style.top=`${window.scrollY - 2}px`},100)};const updateDropdowns=function(){DROPDOWNSTATE[this.id]=this.value;panelImgs.forEach(img=>{checkState(img)});makeCheckerboard()};const togglePanelInfo=(target,classToRemove="",classToAdd="")=>{const panelInfo=document.querySelectorAll("#sidebar .panel_info");const panelCode=target.querySelector("img").alt;panelInfo.forEach(info=>{if(info.classList.contains(classToRemove)){info.classList.remove(classToRemove)}else if(classToAdd&&info.id===panelCode){info.classList.add(classToAdd)}})};const enlargeOnFocus=evt=>{const clickedObj=evt.target;const resetStyles=elmt=>{elmt.style.width="";elmt.style.height="";elmt.style.padding=""};if(!Array.from(panelCells).includes(clickedObj))return;if(clickedObj!==opened){const newDivisions=100/6;const newWidth=newDivisions*2;panelCells.forEach(cell=>{cell.style.width=`${newDivisions}%`;cell.style.height=""});clickedObj.style.width=`${newWidth}%`;clickedObj.style.height="30vw";clickedObj.style.padding="1vw";togglePanelInfo(clickedObj,"show","show");opened=clickedObj}else{panelCells.forEach(cell=>{resetStyles(cell)});togglePanelInfo(clickedObj,"show");opened=null}};loadState(panelImgs,DROPDOWNSTATE);makeCheckerboard();dropdowns.forEach(dropdown=>{dropdown.addEventListener("change",updateDropdowns)});mainArea.addEventListener("click",enlargeOnFocus);window.addEventListener("scroll",scrollPanelInfo)</script></body></html>